<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"
           />
    <title>Affectation - ITAssignPro</title>

    <!-- Feuille de style personnalisée -->
    <link rel="stylesheet" href="#{request.contextPath}/assets/css/custom.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"   />
    <!-- Script Bootstrap JS via CDN -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"  ></script>
</h:head>
<h:body>
    <!-- Inclusion du Header -->
    <ui:include src="/templates/header.xhtml" />

    <div class="container my-5">
        <h1 class="mb-4 text-center">Affectation d'un Employé à un Projet</h1>

        <!-- Affichage des messages JSF -->
        <h:messages globalOnly="true" styleClass="alert alert-info" />

        <!-- Formulaire d'affectation -->
        <h:form>
            <!-- Sélection de l'employé -->
            <div class="mb-3">
                <h:outputLabel for="employeeSelect" value="Sélectionnez un employé :" class="form-label" />
                <h:selectOneMenu id="employeeSelect" value="#{assignmentController.selectedEmployeeId}" styleClass="form-select">
                    <f:selectItem itemLabel="-- Choisissez --" itemValue="" />
                    <f:selectItems value="#{employeeController.employees}" var="emp"
                                   itemValue="#{emp.id}" itemLabel="#{emp.name}" />
                </h:selectOneMenu>
            </div>

            <!-- Sélection du projet -->
            <div class="mb-3">
                <h:outputLabel for="projectSelect" value="Sélectionnez un projet :" class="form-label" />
                <h:selectOneMenu id="projectSelect" value="#{assignmentController.selectedProjectId}" styleClass="form-select">
                    <f:selectItem itemLabel="-- Choisissez --" itemValue="" />
                    <f:selectItems value="#{projectController.projects}" var="proj"
                                   itemValue="#{proj.id}" itemLabel="#{proj.name}" />
                </h:selectOneMenu>
            </div>

            <!-- Pourcentage d'implication -->
            <div class="mb-3">
                <h:outputLabel for="percentage" value="Pourcentage d'implication :" class="form-label" />
                <h:inputText id="percentage" value="#{assignmentController.involvementPercentage}" styleClass="form-control" />
            </div>

            <!-- Bouton d'affectation -->
            <div class="text-center">
                <h:commandButton value="Affecter" action="#{assignmentController.assignEmployeeToProject}" styleClass="btn btn-primary" />
            </div>
        </h:form>
    </div>

    <!-- Inclusion du Footer -->
    <ui:include src="/templates/footer.xhtml" />

</h:body>
</html>
